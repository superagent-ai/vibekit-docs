---
title: "createPullRequest"
description: "Create a pull request after generating code changes."
---

## Method signature

```typescript
async createPullRequest(
  projectPath?: string,
  labelOptions?: LabelOptions,
  branchPrefix?: string
): Promise<PullRequestResponse>
```

## Description

The `createPullRequest` method allows you to create a GitHub pull request after code changes have been generated using any supported agent (Codex, Claude, OpenCode, or Gemini). This method streamlines the process of submitting code changes for review by automatically creating a pull request with the generated modifications.

## Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `projectPath` | `string` | No | Optional path to the project directory. If provided, overrides the default repository directory |
| `labelOptions` | `LabelOptions` | No | Optional label configuration for the pull request |
| `branchPrefix` | `string` | No | Optional prefix for the branch name that will be created |

## Return type

| Type | Description |
|------|-------------|
| `Promise<PullRequestResponse>` | Promise that resolves to a pull request response object |

### PullRequestResponse Interface

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `id` | `number` | Yes | The unique identifier of the pull request |
| `number` | `number` | Yes | The pull request number |
| `state` | `string` | Yes | The state of the pull request (e.g., "open", "closed") |
| `title` | `string` | Yes | The title of the pull request |
| `body` | `string` | Yes | The body/description of the pull request |
| `html_url` | `string` | Yes | The URL to view the pull request on GitHub |
| `head` | `object` | Yes | Information about the head branch of the PR |
| `base` | `object` | Yes | Information about the base branch of the PR |
| `user` | `object` | Yes | Information about the user who created the PR |
| `created_at` | `string` | Yes | ISO timestamp when the PR was created |
| `updated_at` | `string` | Yes | ISO timestamp when the PR was last updated |
| `merged` | `boolean` | Yes | Whether the pull request has been merged |
| `mergeable` | `boolean \| null` | Yes | Whether the pull request can be merged |
| `merge_commit_sha` | `string \| null` | Yes | The SHA of the merge commit if merged |
| `branchName` | `string` | Yes | The name of the branch created for the PR |
| `commitSha` | `string` | No | The SHA of the commit |

## Requirements

- **Agent Type**: This method is available for all supported agents (Codex, Claude, OpenCode, and Gemini)
- **Initialization**: The VibeKit instance must be properly initialized with valid agent configuration
- **Code Generation**: Code changes should be generated before creating a pull request
- **GitHub Integration**: A valid GitHub token and repository URL must be configured

## Error handling

The method throws errors in the following scenarios:

### Initialization Error
```typescript
throw new Error("Agent not initialized")
```
- **When**: The agent is not properly initialized
- **Resolution**: Verify your VibeKit configuration includes valid agent settings and GitHub configuration

## Usage examples

### Basic Usage

```typescript
import { VibeKit } from 'vibekit';

const vibekit = new VibeKit(config);

// Generate code first
await vibekit.generateCode({
  prompt: "Add a new user registration feature",
  mode: "code"
});

// Create pull request with default settings
try {
  const prResponse = await vibekit.createPullRequest();
  
  console.log(`Pull request created: ${prResponse.html_url}`);
  console.log(`PR ID: ${prResponse.id}`);
  console.log(`PR Number: ${prResponse.number}`);
  console.log(`Title: ${prResponse.title}`);
  console.log(`State: ${prResponse.state}`);
  console.log(`Branch: ${prResponse.branchName}`);
  console.log(`Commit SHA: ${prResponse.commitSha}`);
  console.log(`Created at: ${prResponse.created_at}`);
  console.log(`Mergeable: ${prResponse.mergeable}`);
} catch (error) {
  console.error("Failed to create pull request:", error.message);
}
```

### Advanced Usage with Parameters

```typescript
import { VibeKit, LabelOptions } from 'vibekit';

const vibekit = new VibeKit(config);

// Generate code first
await vibekit.generateCode({
  prompt: "Add authentication middleware",
  mode: "code"
});

// Create pull request with custom parameters
const labelOptions: LabelOptions = {
  // Add your label configuration here
};

try {
  const prResponse = await vibekit.createPullRequest(
    "/path/to/custom/project",  // Custom project path
    labelOptions,               // Custom label options
    "feature"                   // Branch prefix (will create feature/xyz branch)
  );
  
  console.log(`Pull request created: ${prResponse.html_url}`);
  console.log(`PR Number: ${prResponse.number}`);
  console.log(`Branch: ${prResponse.branchName}`);
  
  // Access additional GitHub API data
  console.log(`PR Title: ${prResponse.title}`);
  console.log(`PR Body: ${prResponse.body}`);
  console.log(`Author: ${prResponse.user.login}`);
  console.log(`Head branch: ${prResponse.head.ref}`);
  console.log(`Base branch: ${prResponse.base.ref}`);
} catch (error) {
  console.error("Failed to create pull request:", error.message);
}
```

### Using with Different Agents

```typescript
// Works with any agent type
const vibekitClaude = new VibeKit({
  agent: { type: "claude", model: { ... } },
  github: { token: "...", repository: "..." },
  // ... other config
});

const vibekitCodex = new VibeKit({
  agent: { type: "codex", model: { ... } },
  github: { token: "...", repository: "..." },
  // ... other config
});

// Both agents support createPullRequest
await vibekitClaude.createPullRequest();
await vibekitCodex.createPullRequest();
```

## Notes

- The pull request is automatically labeled with the agent type ('codex', 'claude', 'opencode', or 'gemini') to indicate which agent created it
- Ensure your GitHub token has the necessary permissions to create pull requests in the target repository
- The method creates a new branch for the pull request automatically
- Code changes must be generated before calling this method
- When using `branchPrefix`, the final branch name will be in the format `{branchPrefix}/{generated-suffix}`
- The `projectPath` parameter allows you to override the default repository directory for cases where you need to work with a different project structure
- The response includes the complete GitHub API pull request data, allowing access to detailed information like user details, branch information, timestamps, and merge status